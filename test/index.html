<html>
<head>
    <meta charset="UTF-8">
    <title>Phy6-js tests</title>
    <script type="text/javascript" src="/phy6.js"></script>
</head>
<body>

    <h1>Hello world</h1>
    <canvas width="600" height="450"></canvas>

    <script type="text/javascript">
    (function () {

        var Vector = phy6.Vector,
            Body = phy6.Body,
            Engine = phy6.Engine,
            Renderer = phy6.Renderer,
            Timer = phy6.Timer;

        var square = new Body({
            position: new Vector(110, 100),
            restitution: 0.7,
            vertices: [
                new Vector(-10, -10),
                new Vector(10, -10),
                new Vector(10, 10),
                new Vector(-10, 10)
            ]
        });

        var square2 = new Body({
            position: new Vector(460, 100),
            restitution: 0.9,
            vertices: [
                new Vector(-10, -10),
                new Vector(10, -10),
                new Vector(10, 10),
                new Vector(-10, 10)
            ]
        });

        var bar = new Body({
            position: new Vector(300, 200),
            isStatic: true,
            restitution: 0,
            //angle: Math.PI / 18,
            vertices: [
                new Vector(-290, -10),
                new Vector(290, -10),
                new Vector(290, 10),
                new Vector(-290, 10)
            ]
        });

        var bar2 = new Body({
            position: new Vector(590, 200),
            isStatic: true,
            vertices: [
                new Vector(-5, -30),
                new Vector(5, -30),
                new Vector(5, 30),
                new Vector(-5, 30)
            ]
        });

        var engine = new Engine([ square, square2, bar, bar2 ], {
            gravity: new Vector(0, 0.001)
        });

        new Renderer(engine, document.getElementsByTagName('canvas')[0], {
            background: '#DDD',
            showWireframe: true,
            showFPS: true
        }).start();

        const timer = new Timer();
        timer.on('tick', engine.update.bind(engine));
        timer.start();

        square.on('collision', console.info.bind(console, 'SQUARE COLLISION'));
        bar.on('collision', console.info.bind(console, 'BAR COLLISION'));

    })();
    </script>

</body>
</html>
